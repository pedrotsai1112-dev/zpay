# ZPay App - Cursor AI é–‹ç™¼è¦å‰‡

## å°ˆæ¡ˆæ¦‚è¿°
ZPay æ˜¯ä¸€å€‹ Flutter é‡‘èæ”¯ä»˜ Appï¼Œå…·å‚™è½‰å¸³ã€åˆ†å¸³ã€å¥½å‹ç®¡ç†åŠŸèƒ½ã€‚

## ä»£ç¢¼é¢¨æ ¼èˆ‡æ¶æ§‹
- **èªè¨€**: Dart (Flutter 3.9+)
- **ç‹€æ…‹ç®¡ç†**: flutter_riverpod
- **è·¯ç”±**: go_router
- **æ¶æ§‹**: Feature-first + Clean Architecture
- **UI**: Material 3 + è‡ªå®šç¾©è¨­è¨ˆç³»çµ±

## ç›®éŒ„çµæ§‹
```
lib/
â”œâ”€â”€ features/           # åŠŸèƒ½æ¨¡çµ„
â”‚   â”œâ”€â”€ pay/           # è½‰å¸³åŠŸèƒ½
â”‚   â”œâ”€â”€ split/         # åˆ†å¸³åŠŸèƒ½
â”‚   â”œâ”€â”€ friends/       # å¥½å‹ç®¡ç†
â”‚   â””â”€â”€ auth/          # èªè­‰åŠŸèƒ½ï¼ˆæœªä¾†ï¼‰
â”œâ”€â”€ shared/            # å…±äº«çµ„ä»¶
â”‚   â”œâ”€â”€ widgets/       # é€šç”¨ UI çµ„ä»¶
â”‚   â”œâ”€â”€ services/      # æœå‹™å±¤
â”‚   â”œâ”€â”€ models/        # æ•¸æ“šæ¨¡å‹
â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•¸
â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ theme/         # ä¸»é¡Œé…ç½®
â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ constants/     # å¸¸é‡å®šç¾©
â””â”€â”€ main.dart          # å…¥å£æ–‡ä»¶
```

## é–‹ç™¼æº–å‰‡

### ğŸ”´ CRITICAL: æ¸¬è©¦é©…å‹•é–‹ç™¼ (TDD) æµç¨‹
**æ‰€æœ‰é–‹ç™¼å·¥ä½œå¿…é ˆéµå¾ªä»¥ä¸‹æµç¨‹ï¼š**
1. **RED**: å…ˆå¯«æ¸¬è©¦ï¼ˆæ¸¬è©¦æœƒå¤±æ•—ï¼Œå› ç‚ºåŠŸèƒ½é‚„ä¸å­˜åœ¨ï¼‰
2. **GREEN**: å¯«æœ€å°‘çš„ä»£ç¢¼è®“æ¸¬è©¦é€šé
3. **REFACTOR**: é‡æ§‹ä»£ç¢¼ï¼Œä¿æŒæ¸¬è©¦é€šé

**å…·é«”æ­¥é©Ÿï¼š**
```
flutter test                    # ç¢ºä¿ç¾æœ‰æ¸¬è©¦é€šé
å¯«æ–°åŠŸèƒ½çš„æ¸¬è©¦ â†’ é‹è¡Œæ¸¬è©¦ï¼ˆæ‡‰è©²å¤±æ•—ï¼‰
å¯«å¯¦ç¾ä»£ç¢¼ â†’ é‹è¡Œæ¸¬è©¦
é‡è¤‡ä¿®æ”¹ä»£ç¢¼ç›´åˆ°æ¸¬è©¦é€šé
é‡æ§‹å’Œå„ªåŒ–ä»£ç¢¼ â†’ ç¢ºä¿æ¸¬è©¦ä»ç„¶é€šé
```

**ç¦æ­¢è¡Œç‚ºï¼š**
- âŒ åœ¨æ²’æœ‰æ¸¬è©¦çš„æƒ…æ³ä¸‹å¯«æ–°åŠŸèƒ½
- âŒ å¯«æ¸¬è©¦ä¹‹å‰å…ˆå¯«å¯¦ç¾ä»£ç¢¼
- âŒ æäº¤æ²’æœ‰é€šéæ¸¬è©¦çš„ä»£ç¢¼

### 1. ä»£ç¢¼è³ªé‡
- ä½¿ç”¨ `flutter_lints` åš´æ ¼æª¢æŸ¥
- å‡½æ•¸é•·åº¦ä¸è¶…é 20 è¡Œ
- é¡æ–‡ä»¶ä¸è¶…é 200 è¡Œ
- 100% null safety
- å„ªå…ˆä½¿ç”¨ const æ§‹é€ å‡½æ•¸

### 2. å‘½åè¦ç¯„
- æ–‡ä»¶å: snake_case (pay_page.dart)
- é¡å: PascalCase (PayPage)
- è®Šé‡/å‡½æ•¸: camelCase (isLoading)
- å¸¸é‡: SCREAMING_SNAKE_CASE (API_BASE_URL)

### 3. UI/UX è¨­è¨ˆåŸå‰‡
- Material 3 è¨­è¨ˆèªè¨€
- éŸ¿æ‡‰å¼è¨­è¨ˆ (æ‰‹æ©Ÿå„ªå…ˆ)
- ç„¡éšœç¤™æ”¯æŒ (Semantics)
- æµæš¢å‹•ç•« (60fps)
- ä¸€è‡´çš„é–“è·ç³»çµ± (8, 16, 24, 32...)

### 4. æ€§èƒ½å„ªåŒ–
- å„ªå…ˆä½¿ç”¨ StatelessWidget
- é©ç•¶ä½¿ç”¨ const æ§‹é€ å‡½æ•¸
- åˆ—è¡¨ä½¿ç”¨ ListView.builder
- åœ–ç‰‡ä½¿ç”¨ CachedNetworkImage
- é¿å… build æ–¹æ³•ä¸­çš„è¤‡é›œé‚è¼¯

### 5. éŒ¯èª¤è™•ç†
- ä½¿ç”¨ Result<T, E> æ¨¡å¼
- ç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤ä¿¡æ¯
- é©ç•¶çš„ loading ç‹€æ…‹
- ç¶²çµ¡ç•°å¸¸é‡è©¦æ©Ÿåˆ¶

### 6. æ¸¬è©¦ç­–ç•¥ (TDD æ ¸å¿ƒ)
**æ¸¬è©¦å„ªå…ˆç´šï¼š**
1. **å–®å…ƒæ¸¬è©¦**: æ¯å€‹å‡½æ•¸ã€é¡ã€æœå‹™éƒ½å¿…é ˆæœ‰æ¸¬è©¦ï¼ˆç›®æ¨™è¦†è“‹ç‡ > 90%ï¼‰
2. **Widget æ¸¬è©¦**: æ¯å€‹è‡ªå®šç¾© Widget éƒ½å¿…é ˆæœ‰æ¸¬è©¦
3. **é›†æˆæ¸¬è©¦**: ä¸»è¦ç”¨æˆ¶æµç¨‹å’ŒåŠŸèƒ½æ•´åˆ

**æ¸¬è©¦æ–‡ä»¶çµæ§‹ï¼š**
```
test/
â”œâ”€â”€ unit/              # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ models/        # æ•¸æ“šæ¨¡å‹æ¸¬è©¦
â”‚   â”œâ”€â”€ services/      # æœå‹™å±¤æ¸¬è©¦
â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•¸æ¸¬è©¦
â”œâ”€â”€ widget/            # Widget æ¸¬è©¦
â”‚   â”œâ”€â”€ pay/          # è½‰å¸³ç›¸é—œ Widget
â”‚   â”œâ”€â”€ split/        # åˆ†å¸³ç›¸é—œ Widget
â”‚   â””â”€â”€ friends/      # å¥½å‹ç›¸é—œ Widget
â””â”€â”€ integration/       # é›†æˆæ¸¬è©¦
    â”œâ”€â”€ pay_flow_test.dart
    â”œâ”€â”€ split_flow_test.dart
    â””â”€â”€ friends_flow_test.dart
```

**æ¸¬è©¦å‘½ä»¤ï¼š**
- `flutter test` - é‹è¡Œæ‰€æœ‰æ¸¬è©¦
- `flutter test --coverage` - ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
- `flutter test test/unit/` - åªé‹è¡Œå–®å…ƒæ¸¬è©¦
- `flutter test test/widget/` - åªé‹è¡Œ Widget æ¸¬è©¦

## ç‰¹å®šåŠŸèƒ½æŒ‡å¼•

### è½‰å¸³åŠŸèƒ½ (Pay)
- QR Code ç”Ÿæˆ/æƒæ
- é‡‘é¡è¼¸å…¥é©—è­‰
- æ”¯ä»˜ç¢ºèªæµç¨‹
- äº¤æ˜“è¨˜éŒ„

### åˆ†å¸³åŠŸèƒ½ (Split)
- AI è‡ªç„¶èªè¨€è™•ç†
- å¤šäººåˆ†å¸³è¨ˆç®—
- çµæœé è¦½ç¢ºèª
- ç™¼é€åˆ†å¸³è«‹æ±‚

### å¥½å‹ç®¡ç† (Friends)
- QR Code åŠ å¥½å‹
- å¥½å‹åˆ—è¡¨ç®¡ç†
- ç¾¤çµ„åŠŸèƒ½
- åˆ†å¸³æ­·å²

## AI é–‹ç™¼å»ºè­°
1. ç·¨å¯«ä»£ç¢¼æ™‚è«‹ç¢ºä¿é¡å‹å®‰å…¨
2. å„ªå…ˆä½¿ç”¨ç¾æœ‰çš„ widgets å’Œ features
3. æ–°å¢åŠŸèƒ½è«‹éµå¾ªæ—¢æœ‰æ¶æ§‹æ¨¡å¼
4. å§‹çµ‚è€ƒæ…®ç”¨æˆ¶é«”é©—å’Œæ€§èƒ½
5. ä»£ç¢¼è¦æœ‰é©ç•¶çš„è¨»é‡‹ï¼Œç‰¹åˆ¥æ˜¯è¤‡é›œé‚è¼¯
6. ä½¿ç”¨ä¸­æ–‡è¨»é‡‹ï¼Œä¾¿æ–¼åœ˜éšŠç†è§£

## ç‰ˆæœ¬æ§åˆ¶
- ä¸»åˆ†æ”¯: main
- åŠŸèƒ½åˆ†æ”¯: feature/feature-name
- ä¿®å¾©åˆ†æ”¯: fix/issue-description
- Commit ä¿¡æ¯ä½¿ç”¨ä¸­æ–‡ï¼Œæ ¼å¼: [é¡å‹] ç°¡çŸ­æè¿°

## éƒ¨ç½²ç’°å¢ƒ
- é–‹ç™¼: Flutter debug mode
- æ¸¬è©¦: Flutter profile mode  
- ç”Ÿç”¢: Flutter release mode
- å¹³å°: iOS + Android

è«‹åœ¨é–‹ç™¼éç¨‹ä¸­åš´æ ¼éµå¾ªä»¥ä¸Šè¦å‰‡ï¼Œç¢ºä¿ä»£ç¢¼è³ªé‡å’Œé …ç›®ä¸€è‡´æ€§ã€‚
